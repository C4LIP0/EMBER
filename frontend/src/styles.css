/* =============== GLOBAL COLOR THEMES =============== */
:root[data-theme="dark"] {
  --bg:#0b0c10; --card:#111218; --muted:#1b1e27; --text:#e8ecf1; --soft:#c6cbd2;
  --brand:#5cc8ff; --brand-2:#7ae3b1; --danger:#ff6b6b; --ok:#27d17f; --warn:#ffcc66;
  --border:#20232b; --shadow:0 8px 24px rgba(0,0,0,.28);
}

:root[data-theme="light"] {
  --bg:#fafafa; --card:#ffffff; --muted:#f1f1f1; --text:#111; --soft:#333;
  --brand:#007aff; --brand-2:#00c689; --danger:#c92a2a; --ok:#15803d; --warn:#b45309;
  --border:#d4d4d8; --shadow:0 4px 16px rgba(0,0,0,.08);
}

/* =============== BASE =============== */
*{box-sizing:border-box}
html,body,#root{height:100%}
body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,Segoe UI,Arial,sans-serif;transition:background .2s,color .2s}
a{color:var(--brand);text-decoration:none}
nav a{color:var(--soft)}
nav a.active{color:var(--brand);font-weight:600}

/* =============== LAYOUT HELPERS =============== */
.container{max-width:1200px;margin:16px auto;padding:0 16px}
.card{background:var(--card);border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow);padding:16px;transition:background .2s,border .2s}
.hstack{display:flex;gap:12px;align-items:center}
.vstack{display:flex;gap:12px;flex-direction:column}
.grid{display:grid;gap:12px}
.grid-2{grid-template-columns:repeat(2,minmax(0,1fr))}
.grid-3{grid-template-columns:repeat(3,minmax(0,1fr))}
.grid-4{grid-template-columns:repeat(4,minmax(0,1fr))}
.grid > div{min-width:0;overflow-wrap:break-word}
small.muted{color:#9aa3af}
.mono{font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;font-size:12px}

/* =============== ELEMENTS =============== */
.btn{cursor:pointer;border:1px solid var(--border);background:linear-gradient(180deg,var(--muted),var(--card));color:var(--text);
     padding:8px 14px;border-radius:10px;transition:transform .06s ease,opacity .2s}
.btn:hover{transform:translateY(-1px)}
.btn.ghost{background:transparent}
.label{display:block;font-size:12px;color:#9aa3af;margin-bottom:6px}
.input{width:100%;padding:10px;border-radius:10px;border:1px solid var(--border);background:var(--muted);color:var(--text)}
.badge{display:inline-block;border:1px solid var(--border);padding:2px 8px;border-radius:999px;font-size:12px}
.badge.ok{background:rgba(39,209,127,.1);color:var(--ok)}
.badge.issue{background:rgba(255,107,107,.1);color:var(--danger)}
.badge.warn{background:rgba(255,204,102,.1);color:var(--warn)}
.table{width:100%;border-collapse:collapse}
.table th,.table td{padding:10px;border-bottom:1px solid var(--border);text-align:left;vertical-align:top}
.kpi{font-size:28px;font-weight:700;word-break:break-word;overflow-wrap:break-word}
.kpi-sub{color:#9aa3af;font-size:12px;margin-top:-6px;white-space:nowrap}
hr.sep{border:0;border-top:1px solid var(--border);margin:10px 0}
.map-wrap{height:60vh;border-radius:14px;overflow:hidden;border:1px solid var(--border)}
/*======== For Map page controls ======== */
.map-wrap.card { padding: 8px; } 
select.input { padding:8px; border-radius:8px; }
.custom-marker { background:transparent; border:none; }


/*======== For ManualControl ======== */
.mc-wrap { padding: 18px; max-width: 1100px; margin: 0 auto; }
.mc-header { display:flex; align-items:center; justify-content:space-between; gap:12px; }
.mc-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap:14px; margin-top: 14px; }
.mc-card { border: 1px solid var(--border); background: var(--card); border-radius: 14px; padding: 14px; }
.mc-card-title { font-weight: 700; margin-bottom: 10px; }
.mc-row { display:flex; align-items:center; gap:10px; }
.mc-muted { opacity: 0.7; font-size: 0.9rem; }
.mc-hint { margin-top: 10px; opacity: 0.7; font-size: 0.9rem; }

.mc-stop { border: 1px solid var(--border); border-radius: 14px; padding: 10px 14px; font-weight: 700; color: #b00020; background: transparent; cursor:pointer; }
.mc-btn  { border: 1px solid var(--border); border-radius: 14px; padding: 14px 18px; font-weight: 700; background: transparent; cursor:pointer; min-width: 110px; }

.mc-dpad { display:grid; grid-template-columns: 1fr 1fr 1fr; gap:10px; justify-items:center; align-items:center; }

.mc-actions button { border: 1px solid var(--border); border-radius: 10px; padding: 8px 10px; background: transparent; cursor:pointer; }
.mc-motor-row { display:flex; justify-content:space-between; align-items:center; padding: 10px 0; border-top: 1px solid var(--border); }
.mc-motor-row:first-of-type { border-top: none; }
.mc-motor-name { font-weight: 700; }

.mc-log { display:grid; gap:6px; }
.mc-log-line { display:flex; gap:10px; flex-wrap:wrap; }
.mc-log-type { font-weight: 700; }

/* ===== Joystick Ring (clean) ===== */
.joy-wrap { display:flex; justify-content:center; padding: 8px 0; }

.joy-ring{
  width: min(360px, 88vw);
  aspect-ratio: 1 / 1;
  border-radius: 50%;
  position: relative;
  display: grid;
  place-items: center;

  border: 1px solid var(--border, #666);
  background:
    radial-gradient(circle at 30% 25%, rgba(255,255,255,.08), transparent 55%),
    radial-gradient(circle at 70% 80%, rgba(0,0,0,.25), transparent 60%),
    var(--card, transparent);

  box-shadow:
    0 10px 30px rgba(0,0,0,.25),
    inset 0 0 0 10px rgba(255,255,255,.03);
}

.joy-ring::after{
  content:"";
  position:absolute;
  inset: 18%;
  border-radius: 50%;
  border: 1px solid rgba(255,255,255,.08);
  pointer-events:none;
}

.joy-stop{
  width: 92px;
  height: 92px;
  border-radius: 50%;
  border: 1px solid var(--border, #666);
  background: rgba(176,0,32,.08);
  font-weight: 900;
  letter-spacing: .5px;
  color: #b00020;
  cursor: pointer;
  box-shadow: 0 8px 18px rgba(0,0,0,.18);
  transition: transform .08s ease, background .15s ease;
}
.joy-stop:active{ transform: scale(.98); }
.joy-stop:hover{ background: rgba(176,0,32,.12); }

.joy-zone{
  position:absolute;
  top:50%;
  left:50%;
  width: 122px;
  height: 122px;
  border: none;
  background: transparent;
  padding: 0;
  cursor: pointer;

  transform: translate(-50%,-50%) rotate(var(--ang)) translateY(-142px);
  transform-origin: 50% 50%;
  transition: transform .12s ease;
}

.joy-tri{
  width: 100%;
  height: 100%;
  clip-path: polygon(50% 7%, 7% 93%, 93% 93%);
  box-sizing: border-box;

  border: 1px solid var(--border, #666);
  background: rgba(255,255,255,.05);
  box-shadow:
    0 8px 18px rgba(0,0,0,.18),
    inset 0 0 0 1px rgba(255,255,255,.05);

  transition: background .15s ease, transform .12s ease, box-shadow .15s ease;
}

.joy-zone:hover .joy-tri{
  background: rgba(255,255,255,.08);
  transform: translateY(-2px);
  box-shadow:
    0 10px 22px rgba(0,0,0,.22),
    inset 0 0 0 1px rgba(255,255,255,.08);
}

.joy-zone.is-active .joy-tri{
  background: rgba(74,163,255,.12);
  transform: translateY(-2px) scale(.99);
  box-shadow:
    0 12px 24px rgba(0,0,0,.25),
    inset 0 0 0 1px rgba(74,163,255,.25);
}

.joy-text{
  position:absolute;
  inset: 0;
  display:flex;
  flex-direction: column;
  align-items:center;
  justify-content:center;
  gap: 6px;
  pointer-events:none;
}

.joy-pill{
  font-size: 0.78rem;
  font-weight: 800;
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.18);
  backdrop-filter: blur(4px);
  opacity: .92;
  white-space: nowrap;
}

.joy-pill.m1{ color: #4aa3ff; }
.joy-pill.m2{ color: var(--text, #ddd); }
